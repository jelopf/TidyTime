<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:views="using:TidyTime.Views"
             xmlns:vm="using:TidyTime.ViewModels"
             xmlns:converters="using:TidyTime.Converters"
             mc:Ignorable="d" d:DesignWidth="360" d:DesignHeight="640"
             x:Class="TidyTime.Views.ScheduleScreenView"
             x:DataType="vm:ScheduleScreenViewModel"
             x:Name="Root">

    <!--Конвертеры-->
    <UserControl.Resources>
        <converters:BoolToBackgroundConverter x:Key="BoolToBackgroundConverter"/>
        <converters:BoolToStrikethroughConverter x:Key="BoolToStrikethroughConverter"/>
        <converters:TaskStatusToBoolConverter x:Key="TaskStatusToBoolConverter"/>
        <converters:IntToBoolConverter x:Key="IntToBoolConverter"/>
        <converters:TaskStatusToHeightConverter x:Key="TaskStatusToHeightConverter"/>
        <converters:BoolToValueConverter x:Key="BoolToValueConverter"/>
        <converters:MultiBoolToVisibilityConverter x:Key="MultiBoolToVisibilityConverter"/>
    </UserControl.Resources>

    <!--Стили-->
    <UserControl.Styles>
        <!--Задача в нормальном состоянии-->
        <Style Selector="Expander /template/ ToggleButton">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderBrush" Value="Transparent"/>
            <Setter Property="Padding" Value="0"/>
        </Style>
        <!--Задача при наведении-->
        <Style Selector="Expander /template/ ToggleButton:pointerover /template/ Border#ToggleButtonBackground">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderBrush" Value="Transparent"/>
        </Style>
        <!--Кнопка раскрытия в нормальном состоянии-->
        <Style Selector="Expander /template/ ToggleButton:not(:pointerover):not(:pressed) /template/ Border#ExpandCollapseChevronBorder">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderBrush" Value="White"/>
            <Setter Property="Margin" Value="0"/>
            <Setter Property="Width" Value="15"/>
            <Setter Property="Height" Value="11"/>
        </Style>
        <!--Кнопка раскрытия при наведении-->
        <Style Selector="Expander /template/ ToggleButton:pointerover /template/ Border#ExpandCollapseChevronBorder">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderBrush" Value="White"/>
            <Setter Property="Margin" Value="0"/>
            <Setter Property="Width" Value="15"/>
            <Setter Property="Height" Value="11"/>
        </Style>

        <Style Selector="TabItem">
            <Setter Property="Background" Value="White"/>
            <Setter Property="CornerRadius" Value="16, 16, 0, 0"/>
            <Setter Property="MinHeight" Value="31"/>
            <Setter Property="Width" Value="36"/>
            <Setter Property="Padding" Value="0,4,0,4"/>
        </Style>
    </UserControl.Styles>


    <StackPanel Background="#FFFFFF">
        
        <!-- топбар -->
        <Border Padding="35.5,30,35.5,28">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <!-- иконка профиля -->
                <Button Grid.Column="0" 
                        Content="П" 
                        Width="20" 
                        Height="22"
                        Padding="0"
                        Background="Transparent"
                        BorderThickness="0"
                        Command="{Binding GoToProfileCommand}"
                        FontSize="16"
                        HorizontalAlignment="Center"
                        HorizontalContentAlignment="Center"
                        VerticalContentAlignment="Center"/>
                
                <!-- ФИ -->
                <StackPanel Grid.Column="1" 
                            Orientation="Horizontal"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"
                            Spacing="5">
                    
                    <!-- Для ребенка показываем просто имя -->
                    <TextBlock Text="{Binding UserDisplayName}" 
                               VerticalAlignment="Center"
                               FontSize="14"
                               FontFamily="{StaticResource ComfortaaBold}"
                               IsVisible="{Binding !IsParentMode}"/>
                    
                    <!-- Для родителя - имя ребенка с выпадающим меню -->
                    <Button Background="Transparent"
                            BorderThickness="0"
                            Padding="5,0,5,0"
                            IsVisible="{Binding IsParentMode}">
                        
                        <Button.Content>
                            <StackPanel Orientation="Horizontal"
                                        Spacing="3"
                                        VerticalAlignment="Center">
                                
                                <TextBlock Text="{Binding ChildDisplayName}" 
                                           FontSize="14"
                                           FontFamily="{StaticResource ComfortaaBold}"/>
                                
                                <!-- Стрелочка вниз -->
                                <TextBlock Text="v"
                                           FontSize="10"
                                           VerticalAlignment="Center"
                                           IsVisible="{Binding Children.Count, Converter={StaticResource IntToBoolConverter}, ConverterParameter=1}"/>
                            </StackPanel>
                        </Button.Content>
                        
                        <!--Выпадающее меню детей-->
                        <Button.Flyout>
                            <Flyout Placement="Bottom">
                                <ListBox ItemsSource="{Binding Children}"
                                         Background="White"
                                         BorderThickness="0"
                                         MaxHeight="200"
                                         IsVisible="{Binding Children.Count, Converter={StaticResource IntToBoolConverter}, ConverterParameter=1}">
                                    
                                    <ListBox.ItemTemplate>
                                        <DataTemplate>
                                            <Button Background="Transparent"
                                                    BorderThickness="0"
                                                    HorizontalContentAlignment="Stretch"
                                                    Command="{Binding DataContext.SelectChildCommand, ElementName=Root}"
                                                    CommandParameter="{Binding}">
                                                
                                                <TextBlock Text="{Binding Login}"
                                                           FontSize="14"
                                                           FontFamily="{StaticResource ComfortaaMedium}"
                                                           Padding="10,5"
                                                           HorizontalAlignment="Center"/>
                                            </Button>
                                        </DataTemplate>
                                    </ListBox.ItemTemplate>
                                </ListBox>
                            </Flyout>
                        </Button.Flyout>
                    </Button>
                </StackPanel>
                
                <!-- иконка меню -->
                <Button Grid.Column="2" 
                        Content="М" 
                        Width="20" 
                        Height="20"
                        Padding="0"
                        Background="Transparent"
                        BorderThickness="0"
                        FontSize="16"
                        HorizontalAlignment="Center"
                        HorizontalContentAlignment="Center"
                        VerticalContentAlignment="Center"
                        Command="{Binding GoToMenuCommand}"/>
            </Grid>
        </Border>

        <!-- расписание -->
        <Border Background="{Binding IsParentMode, Converter={StaticResource BoolToValueConverter}, ConverterParameter='#80A8DF; #86C7FF'}"  
                Height="416" 
                VerticalAlignment="Center"
                CornerRadius="16"
                Padding="18,8,18,0">
            <Grid>
                <!-- тут должна быть кнопка переключения недели -->
                <Button Width="4.97"
                        Height="9.37"
                        Content="&lt;"
                        Margin="1,12,0,0"
                        HorizontalAlignment="Left"
                        VerticalAlignment="Top"
                        Background="Transparent"
                        BorderThickness="0"
                        FontSize="12"
                        Command="{Binding NavigateToPreviousWeekCommand}"/>

                <!-- табы дней недели -->
                <!--динамический tabcontrol-->
                <TabControl ItemsSource="{Binding WeekDays}"
                            SelectedIndex="{Binding SelectedDayIndex}"
                            SelectionChanged="OnTabSelectionChanged">
                    
                    <TabControl.Styles>
                        <Style Selector="TabControl">
                            <Setter Property="ItemsPanel">
                                <ItemsPanelTemplate>
                                    <UniformGrid Columns="7"/>
                                </ItemsPanelTemplate>
                            </Setter>
                        </Style>
                    </TabControl.Styles>

                    <!--шаблон отображения кнокпи дня-->
                    <TabControl.ItemTemplate>
                        <DataTemplate>
                            <Button Background="{Binding IsSelected, Converter={StaticResource BoolToBackgroundConverter}}"
                                    Width="36" 
                                    Height="31"
                                    CornerRadius="16"
                                    BorderThickness="0"
                                    Padding="0"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    HorizontalContentAlignment="Center"
                                    VerticalContentAlignment="Center"
                                    Command="{Binding DataContext.SelectDayCommand, ElementName=Root}"
                                    CommandParameter="{Binding}">
                                <StackPanel>
                                    <TextBlock Text="{Binding DayNumber}"
                                               FontSize="14"
                                               FontFamily="{StaticResource ComfortaaBold}"
                                               HorizontalAlignment="Center"/>
                                    <TextBlock Text="{Binding DayName}"
                                               FontSize="10"
                                               FontFamily="{StaticResource ComfortaaRegular}"
                                               FontWeight="Regular"
                                               HorizontalAlignment="Center"/>
                                </StackPanel>
                            </Button>
                        </DataTemplate>
                    </TabControl.ItemTemplate>

                    <!--шаблон содержимого таба (само расписани)-->
                    <TabControl.ContentTemplate>
                        <DataTemplate>
                            <Border Background="#FFFFFF"
                                    Padding="12"
                                    CornerRadius="16"
                                    Height="323"
                                    Margin="0,0,0,50"
                                    VerticalAlignment="Top">
                                
                                <StackPanel>
                                    <!-- Заголовок дня -->
                                    <TextBlock Text="{Binding DataContext.DateTitle, ElementName=Root}"
                                               FontSize="14"
                                               FontFamily="{StaticResource ComfortaaBold}"
                                               HorizontalAlignment="Center"/>
                                    
                                    <!-- Список задач -->
                                    <ItemsControl ItemsSource="{Binding DataContext.Tasks, ElementName=Root}"
                                                  Margin="0,12,0,0">
                                        
                                        <ItemsControl.ItemTemplate>
                                            <DataTemplate>
                                                <!-- Карточка задачи-->
                                                <StackPanel Margin="0,0,0,12">
                                                    
                                                    <!-- Свернутый вид-->
                                                    <Border Background="{Binding CardColor}"
                                                            CornerRadius="16"
                                                            Padding="12"
                                                            Height="{Binding Status, Converter={StaticResource TaskStatusToHeightConverter}}"
                                                            IsVisible="{Binding !IsExpanded}">
                                                        <Grid>
                                                            <Grid.ColumnDefinitions>
                                                                <ColumnDefinition Width="*"/>
                                                                <ColumnDefinition Width="Auto"/>
                                                            </Grid.ColumnDefinitions>
                                                            
                                                            <!-- название и время -->
                                                            <StackPanel Grid.Column="0"
                                                                        Orientation="Horizontal"
                                                                        VerticalAlignment="Center">
                                                                <TextBlock Text="{Binding Title}"
                                                                           FontSize="10"
                                                                           FontFamily="{StaticResource ComfortaaBold}"
                                                                           TextDecorations="{Binding IsTitleStrikethrough, Converter={StaticResource BoolToStrikethroughConverter}}"
                                                                           VerticalAlignment="Center"
                                                                           Margin="0,0,6,0"/>
                                                                
                                                                <TextBlock Text="{Binding TimeRange}"
                                                                           FontSize="10"
                                                                           FontFamily="{StaticResource ComfortaaRegular}"
                                                                           FontWeight="Regular"
                                                                           VerticalAlignment="Center"/>
                                                            </StackPanel>
                                                            
                                                            <!-- награда и стрелочка -->
                                                            <StackPanel Grid.Column="1"
                                                                        Orientation="Horizontal"
                                                                        VerticalAlignment="Center"
                                                                        Spacing="6">
                                                                
                                                                <!-- монетки для ребенка-->
                                                                <StackPanel Orientation="Horizontal"
                                                                            Spacing="4"
                                                                            IsVisible="{Binding !DataContext.IsParentMode, ElementName=Root}">
                                                                
                                                                    <!-- Для невыполненных задач -->
                                                                    <StackPanel Orientation="Horizontal"
                                                                                Spacing="4"
                                                                                IsVisible="{Binding Status, Converter={StaticResource TaskStatusToBoolConverter}, ConverterParameter=NotCompleted}">
                                                                        <TextBlock Text="{Binding RewardCoins}"
                                                                                FontSize="14"
                                                                                FontFamily="{StaticResource ComfortaaBold}"/>
                                                                        
                                                                        <Ellipse Width="16" 
                                                                                Height="16" 
                                                                                Fill="#FFCC00"/>
                                                                    </StackPanel>

                                                                    <!-- монетки для выполненных задач-->
                                                                    <Border Background="#B2F6C3"
                                                                            CornerRadius="16"
                                                                            Padding="6,3,6,3"
                                                                            IsVisible="{Binding Status, Converter={StaticResource TaskStatusToBoolConverter}, ConverterParameter=Completed}">
                                                                        <StackPanel Orientation="Horizontal" 
                                                                                    Spacing="4">
                                                                            <TextBlock Text="{Binding RewardCoins}"
                                                                                    FontSize="14"
                                                                                    FontFamily="{StaticResource ComfortaaBold}"/>
                                                                            
                                                                            <Ellipse Width="16" 
                                                                                    Height="16" 
                                                                                    Fill="#FFCC00"/>
                                                                        </StackPanel>
                                                                    </Border>
                                                                </StackPanel>
                                                                
                                                                <Button Content="Похвалить"
                                                                        Width="74"
                                                                        Height="23"
                                                                        Padding="0"
                                                                        Background="#B2F6C3"
                                                                        BorderThickness="0"
                                                                        CornerRadius="16"
                                                                        FontSize="10"
                                                                        FontFamily="{StaticResource ComfortaaBold}"
                                                                        IsVisible="{Binding Status, Converter={StaticResource TaskStatusToBoolConverter}, ConverterParameter=Completed}">
                                                                    <Button.IsVisible>
                                                                        <MultiBinding Converter="{StaticResource MultiBoolToVisibilityConverter}">
                                                                            <Binding Path="Status" 
                                                                                    Converter="{StaticResource TaskStatusToBoolConverter}"
                                                                                    ConverterParameter="Completed"/>
                                                                            <Binding Path="DataContext.IsParentMode" 
                                                                                    ElementName="Root"/>
                                                                        </MultiBinding>
                                                                    </Button.IsVisible>
                                                                </Button>
                                                                
                                                                <!-- Стрелка вниз (развернуть) -->
                                                                <Button Content="v"
                                                                        Width="16"
                                                                        Height="16"
                                                                        Padding="0"
                                                                        Background="Transparent"
                                                                        BorderThickness="0"
                                                                        FontSize="12"
                                                                        Command="{Binding DataContext.ToggleTaskExpansionCommand, ElementName=Root}"
                                                                        CommandParameter="{Binding}"/>
                                                            </StackPanel>
                                                        </Grid>
                                                    </Border>
                                                    
                                                    <!-- Развернутый вид -->
                                                    <Border Background="{Binding CardColor}"
                                                            CornerRadius="16"
                                                            Padding="12"
                                                            Height="109"
                                                            IsVisible="{Binding IsExpanded}">
                                                        <Grid>
                                                            <Grid.RowDefinitions>
                                                                <RowDefinition Height="Auto"/>
                                                                <RowDefinition Height="*"/>
                                                                <RowDefinition Height="Auto"/>
                                                            </Grid.RowDefinitions>
                                                            
                                                            <Grid Grid.Row="0">
                                                                <Grid.ColumnDefinitions>
                                                                    <ColumnDefinition Width="*"/>
                                                                    <ColumnDefinition Width="Auto"/>
                                                                </Grid.ColumnDefinitions>
                                                                
                                                                <!-- название и время -->
                                                                <StackPanel Grid.Column="0"
                                                                            Orientation="Horizontal"
                                                                            VerticalAlignment="Center">
                                                                    <TextBlock Text="{Binding Title}"
                                                                               FontSize="10"
                                                                               FontFamily="{StaticResource ComfortaaBold}"
                                                                               TextDecorations="{Binding IsTitleStrikethrough, Converter={StaticResource BoolToStrikethroughConverter}}"
                                                                               VerticalAlignment="Center"
                                                                               Margin="0,0,6,0"/>
                                                                    
                                                                    <TextBlock Text="{Binding TimeRange}"
                                                                               FontSize="10"
                                                                               FontFamily="{StaticResource ComfortaaRegular}"
                                                                               FontWeight="Regular"
                                                                               VerticalAlignment="Center"/>
                                                                </StackPanel>
                                                                
                                                                <StackPanel Grid.Column="1"
                                                                            Orientation="Horizontal"
                                                                            VerticalAlignment="Center"
                                                                            Spacing="6">
                                                                    
                                                                    <!-- монетки в развернутом виде -->
                                                                    <StackPanel Orientation="Horizontal"
                                                                                Spacing="4"
                                                                                IsVisible="{Binding !DataContext.IsParentMode, ElementName=Root}">
                                                                        
                                                                        <!-- Для невыполненных задач -->
                                                                        <StackPanel Orientation="Horizontal"
                                                                                    Spacing="4"
                                                                                    IsVisible="{Binding Status, Converter={StaticResource TaskStatusToBoolConverter}, ConverterParameter=NotCompleted}">
                                                                            <TextBlock Text="{Binding RewardCoins}"
                                                                                    FontSize="14"
                                                                                    FontFamily="{StaticResource ComfortaaBold}"/>
                                                                            
                                                                            <Ellipse Width="16" 
                                                                                    Height="16" 
                                                                                    Fill="#FFCC00"/>
                                                                        </StackPanel>
                                                                        
                                                                        <!-- Для выполненных задач -->
                                                                        <Border Background="#B2F6C3"
                                                                                CornerRadius="16"
                                                                                Padding="6,3,6,3"
                                                                                IsVisible="{Binding Status, Converter={StaticResource TaskStatusToBoolConverter}, ConverterParameter=Completed}">
                                                                            <StackPanel Orientation="Horizontal" 
                                                                                        Spacing="4">
                                                                                <TextBlock Text="{Binding RewardCoins}"
                                                                                        FontSize="14"
                                                                                        FontFamily="{StaticResource ComfortaaBold}"/>
                                                                                
                                                                                <Ellipse Width="16" 
                                                                                        Height="16" 
                                                                                        Fill="#FFCC00"/>
                                                                            </StackPanel>
                                                                        </Border>
                                                                    </StackPanel>

                                                                    <Button Content="Похвалить"
                                                                            Width="74"
                                                                            Height="23"
                                                                            Padding="0"
                                                                            Background="#B2F6C3"
                                                                            BorderThickness="0"
                                                                            CornerRadius="16"
                                                                            FontSize="10"
                                                                            FontFamily="{StaticResource ComfortaaBold}">
                                                                        <Button.IsVisible>
                                                                            <MultiBinding Converter="{StaticResource MultiBoolToVisibilityConverter}">
                                                                                <Binding Path="Status" 
                                                                                        Converter="{StaticResource TaskStatusToBoolConverter}"
                                                                                        ConverterParameter="Completed"/>
                                                                                <Binding Path="DataContext.IsParentMode" 
                                                                                        ElementName="Root"/>
                                                                            </MultiBinding>
                                                                        </Button.IsVisible>
                                                                    </Button>

                                                                    <!-- Стрелка вниз (свернуть) -->
                                                                    <Button Content="^"
                                                                            Width="16"
                                                                            Height="16"
                                                                            Padding="0"
                                                                            Background="Transparent"
                                                                            BorderThickness="0"
                                                                            FontSize="12"
                                                                            Command="{Binding DataContext.ToggleTaskExpansionCommand, ElementName=Root}"
                                                                            CommandParameter="{Binding}"/>
                                                                </StackPanel>
                                                            </Grid>
                                                            
                                                            <!--Описание -->
                                                            <TextBlock Grid.Row="1"
                                                                       Text="{Binding Description}"
                                                                       FontSize="10"
                                                                       FontFamily="{StaticResource ComfortaaRegular}"
                                                                       FontWeight="Regular"
                                                                       TextWrapping="Wrap"
                                                                       Margin="0,12,0,12"
                                                                       IsVisible="{Binding HasDescription}"/>
                                                            
                                                            <!-- Кнопки управления -->
                                                            <Grid Grid.Row="2">
                                                                <Grid.ColumnDefinitions>
                                                                    <ColumnDefinition Width="*"/>
                                                                    <ColumnDefinition Width="Auto"/>
                                                                </Grid.ColumnDefinitions>
                                                                
                                                                <StackPanel Grid.Column="0" 
                                                                            Orientation="Horizontal"
                                                                            Spacing="12">
                                                                    
                                                                    <!--Кнопка удалить-->
                                                                    <Button Content="У"
                                                                            Width="20"
                                                                            Height="20"
                                                                            Padding="0"
                                                                            Background="Transparent"
                                                                            BorderThickness="0"
                                                                            FontSize="12"
                                                                            Command="{Binding DataContext.DeleteTaskCommand, ElementName=Root}"
                                                                            CommandParameter="{Binding}"/>
                                                                    
                                                                    <!--Кнопка редактировать-->
                                                                    <Button Content="Р"
                                                                            Width="20"
                                                                            Height="20"
                                                                            Padding="0"
                                                                            Background="Transparent"
                                                                            BorderThickness="0"
                                                                            FontSize="12"
                                                                            Command="{Binding DataContext.EditTaskCommand, ElementName=Root}"
                                                                            CommandParameter="{Binding}"/>
                                                                </StackPanel>
                                                                
                                                                <!-- Кнопка выполнено -->
                                                                <StackPanel Grid.Column="1" 
                                                                            HorizontalAlignment="Right"
                                                                            Orientation="Horizontal"
                                                                            Spacing="6">
                                                                    
                                                                    <Button Content="Выполнено"
                                                                            Background="#535353"
                                                                            Foreground="White"
                                                                            CornerRadius="16"
                                                                            Padding="6,6,6,6"
                                                                            FontSize="10"
                                                                            FontFamily="{StaticResource ComfortaaBold}"
                                                                            FontWeight="Bold"
                                                                            IsVisible="{Binding Status, Converter={StaticResource TaskStatusToBoolConverter}, ConverterParameter=NotCompleted}"
                                                                            Command="{Binding DataContext.MarkAsCompletedCommand, ElementName=Root}"
                                                                            CommandParameter="{Binding}"/>
                                                                </StackPanel>
                                                            </Grid>
                                                        </Grid>
                                                    </Border>
                                                </StackPanel>
                                            </DataTemplate>
                                        </ItemsControl.ItemTemplate>
                                    </ItemsControl>
                                    
                                    <!-- Сообщение, если задач нет -->
                                    <TextBlock Text="Задач на сегодня нет"
                                               HorizontalAlignment="Center"
                                               VerticalAlignment="Center"
                                               FontSize="12"
                                               FontFamily="{StaticResource ComfortaaRegular}"
                                               Foreground="#999999"
                                               IsVisible="{Binding DataContext.ShowNoTasksMessage, ElementName=Root}"
                                               Margin="0,50,0,0"/>

                                    <StackPanel HorizontalAlignment="Center"
                                                VerticalAlignment="Center"
                                                Spacing="16"
                                                Margin="0,50,0,0"
                                                IsVisible="{Binding DataContext.ShowNoChildrenMessage, ElementName=Root}">
                                        
                                        <TextBlock Text="Чтобы начать составлять расписание, добавьте ребенка в личном кабинете"
                                                TextWrapping="Wrap"
                                                FontSize="12"
                                                FontFamily="{StaticResource ComfortaaRegular}"
                                                TextAlignment="Center"
                                                Foreground="#999999"/>
                                        
                                        <Button Content="Перейти в профиль"
                                                Command="{Binding DataContext.GoToProfileCommand, ElementName=Root}"
                                                Width="160"
                                                Height="35"
                                                Background="#80A8DF"
                                                Foreground="White"
                                                CornerRadius="16"
                                                FontSize="12"
                                                FontFamily="{StaticResource ComfortaaMedium}"
                                                FontWeight="Medium"
                                                HorizontalAlignment="Center"
                                                HorizontalContentAlignment="Center"
                                                VerticalContentAlignment="Center"/>
                                    </StackPanel>
                                </StackPanel>
                            </Border>
                        </DataTemplate>
                    </TabControl.ContentTemplate>
                </TabControl>

                <!-- тут должна быть кнопка переключения недель -->
                <Button Width="4.97"
                        Height="9.37"
                        Content="&gt;"
                        Margin="0,12,1,0"
                        HorizontalAlignment="Right"
                        VerticalAlignment="Top"
                        Background="Transparent"
                        BorderThickness="0"
                        FontSize="12"
                        Command="{Binding NavigateToNextWeekCommand}"/>

                <!-- Нижняя панель с кнопкой добавления задачи -->
                <StackPanel VerticalAlignment="Bottom">
                    <Border Padding="18,0,18,0"
                            Height="50">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <TextBlock Text="Добавить задачу" 
                                       VerticalAlignment="Center"
                                       FontSize="10"
                                       FontFamily="{StaticResource ComfortaaBold}"
                                       Grid.Column="0"/>

                            <Button Content="+"
                                    Width="18" 
                                    Height="18"
                                    FontSize="20"
                                    Padding="0"
                                    Grid.Column="1"
                                    Background="Transparent"
                                    BorderThickness="0"
                                    VerticalAlignment="Center"
                                    HorizontalContentAlignment="Center"
                                    VerticalContentAlignment="Center"
                                    Command="{Binding OpenAddTaskCommand}"/>
                        </Grid>
                    </Border>
                </StackPanel>
            </Grid>
        </Border>

        <!-- добавление задачи (попап)-->
        <Popup IsOpen="{Binding IsAddTaskPopupOpen}"
               Placement="Center">
            <views:AddTaskPopupView DataContext="{Binding AddTaskPopupViewModel}" />
        </Popup>
        
    </StackPanel>
</UserControl>